#include<bits/stdc++.h>
using namespace std;
int a[32][15]{2,4,5,6,10,11,9,14,19,17,23,29,0,0,0,4,5,6,10,11,12,18,24,15,20,25,0,0,0,0,4,5,6,7,8,9,10,14,15,21,27,31,0,0,0,5,6,7,8,9,10,14,15,11,16,22,28,19,0,0,6,7,10,11,17,23,29,15,20,25,0,0,0,0,0,7,10,11,12,13,17,18,24,16,21,26,0,0,0,0,11,12,13,17,18,22,27,30,0,0,0,0,0,0,0,9,10,11,12,13,14,15,20,26,30,0,0,0,0,0,10,11,12,13,14,15,19,21,27,31,0,0,0,0,0,11,12,13,14,15,16,17,21,22,20,25,28,0,0,0,12,13,17,18,15,16,17,21,22,23,29,26,0,0,0,13,17,18,24,22,27,30,0,0,0,0,0,0,0,0,17,18,23,28,31,0,0,0,0,0,0,0,0,0,0,15,16,17,18,19,20,21,25,26,30,0,0,0,0,0,16,17,18,19,20,21,25,26,22,27,31,0,0,0,0,17,18,21,22,26,28,0,0,0,0,0,0,0,0,0,18,21,22,23,24,28,29,27,30,0,0,0,0,0,0,22,23,24,28,29,31,0,0,0,0,0,0,0,0,0,20,21,22,23,24,25,26,0,0,0,0,0,0,0,0,21,22,23,24,25,26,30,0,0,0,0,0,0,0,0,22,23,24,25,26,27,28,30,31,0,0,0,0,0,0,23,24,26,27,28,29,30,31,0,0,0,0,0,0,0,24,28,29,31,0,0,0,0,0,0,0,0,0,0,0,28,29,0,0,0,0,0,0,0,0,0,0,0,0,0,26,27,28,29,0,0,0,0,0,0,0,0,0,0,0,27,28,29,30,31,0,0,0,0,0,0,0,0,0,0,28,29,30,31,0,0,0,0,0,0,0,0,0,0,0,29,30,31,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,31,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
int s,k,n,b[32],h[32][32],c[32];
void dg(int dep)
{
	if (dep>31) {
		s++;
		if (s==n) for (int i=1;i<=31;i++)
		          cout<<c[i]<<' ';
	}
	else {
		if (b[dep]!=0) {
			c[dep]=b[dep];
			for (int i=1;i<=15;i++)
			h[a[dep-1][i-1]][b[dep]]=1;
			dg(dep+1);
		}
		else {
		for (int i=1;i<=k;i++)
		{
			if (h[dep][i]==0) {
			  c[dep]=i;
			  for (int j=1;j<=15;j++)
			h[a[dep-1][j-1]][i]=1;
			dg(dep+1);
			for (int j=1;j<=15;j++)
			h[a[dep-1][j-1]][i]=0;
		    }
		}
	    }
	}
}
int main(){
  //freopen(".in","r",stdin);
  //freopen(".out","w",stdout);
  cin>>k>>n;
  for (int i=1;i<=31;i++)
  cin>>b[i];
  dg(1);
  return 0;
}


