#include<bits/stdc++.h>
using namespace std;
int a,b,s,t[110];
template <typename T> void read(T &x)
{
	x=0;char c=getchar();bool flg=0;
	for (;!isdigit(c);c=getchar()) if (c=='-') flg=1;
	for (;isdigit(c);c=getchar()) x=x*10+c-'0';
	if (flg) x=-x;
}
void wrk(int u)
{
	if (u>31) 
	{
		s++;
		if (s==b)
		{
			cout<<"Found"<<endl;
			for (int i=1;i<=30;i++) cout<<t[i]<<' ';
			cout<<t[31]<<endl;
		}
	}
	else
	{
		if (t[u]!=0) 
		wrk(u+1);
		else
		for (int i=1;i<=a;i++)
		{
			if ((u==1)&&(i!=t[2])&&(i!=t[4])&&(i!=t[5])&&(i!=t[6])&&(i!=t[9])&&(i!=t[10])&&(i!=t[11])&&(i!=t[14])&&(i!=t[17])&&(i!=t[19])&&(i!=t[23])&&(i!=t[29]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==2)&&(i!=t[1])&&(i!=t[4])&&(i!=t[5])&&(i!=t[6])&&(i!=t[10])&&(i!=t[11])&&(i!=t[12])&&(i!=t[15])&&(i!=t[18])&&(i!=t[20])&&(i!=t[24])&&(i!=t[25]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==3)&&(i!=t[4])&&(i!=t[5])&&(i!=t[6])&&(i!=t[7])&&(i!=t[8])&&(i!=t[9])&&(i!=t[10])&&(i!=t[14])&&(i!=t[15])&&(i!=t[21])&&(i!=t[27])&&(i!=t[31]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==4)&&(i!=t[1])&&(i!=t[2])&&(i!=t[3])&&(i!=t[5])&&(i!=t[6])&&(i!=t[7])&&(i!=t[8])&&(i!=t[9])&&(i!=t[10])&&(i!=t[11])&&(i!=t[14])&&(i!=t[15])&&(i!=t[16])&&(i!=t[19])&&(i!=t[22])&&(i!=t[28]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==5)&&(i!=t[1])&&(i!=t[2])&&(i!=t[3])&&(i!=t[4])&&(i!=t[6])&&(i!=t[7])&&(i!=t[10])&&(i!=t[11])&&(i!=t[15])&&(i!=t[17])&&(i!=t[20])&&(i!=t[23])&&(i!=t[25])&&(i!=t[29]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==6)&&(i!=t[1])&&(i!=t[2])&&(i!=t[3])&&(i!=t[4])&&(i!=t[5])&&(i!=t[7])&&(i!=t[10])&&(i!=t[11])&&(i!=t[12])&&(i!=t[13])&&(i!=t[16])&&(i!=t[17])&&(i!=t[18])&&(i!=t[21])&&(i!=t[24])&&(i!=t[26]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==7)&&(i!=t[3])&&(i!=t[4])&&(i!=t[5])&&(i!=t[6])&&(i!=t[11])&&(i!=t[12])&&(i!=t[13])&&(i!=t[17])&&(i!=t[18])&&(i!=t[22])&&(i!=t[27])&&(i!=t[30]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==8)&&(i!=t[3])&&(i!=t[4])&&(i!=t[9])&&(i!=t[10])&&(i!=t[11])&&(i!=t[12])&&(i!=t[13])&&(i!=t[14])&&(i!=t[15])&&(i!=t[20])&&(i!=t[26])&&(i!=t[30]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==9)&&(i!=t[1])&&(i!=t[3])&&(i!=t[4])&&(i!=t[8])&&(i!=t[10])&&(i!=t[11])&&(i!=t[12])&&(i!=t[13])&&(i!=t[14])&&(i!=t[15])&&(i!=t[19])&&(i!=t[21])&&(i!=t[27])&&(i!=t[31]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==10)&&(i!=t[1])&&(i!=t[2])&&(i!=t[3])&&(i!=t[4])&&(i!=t[5])&&(i!=t[6])&&(i!=t[8])&&(i!=t[9])&&(i!=t[11])&&(i!=t[12])&&(i!=t[13])&&(i!=t[14])&&(i!=t[15])&&(i!=t[16])&&(i!=t[17])&&(i!=t[20])&&(i!=t[21])&&(i!=t[22])&&(i!=t[25])&&(i!=t[28]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==11)&&(i!=t[1])&&(i!=t[2])&&(i!=t[4])&&(i!=t[5])&&(i!=t[6])&&(i!=t[7])&&(i!=t[8])&&(i!=t[9])&&(i!=t[10])&&(i!=t[12])&&(i!=t[13])&&(i!=t[15])&&(i!=t[16])&&(i!=t[17])&&(i!=t[18])&&(i!=t[21])&&(i!=t[22])&&(i!=t[23])&&(i!=t[26])&&(i!=t[29]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==12)&&(i!=t[2])&&(i!=t[6])&&(i!=t[7])&&(i!=t[8])&&(i!=t[9])&&(i!=t[10])&&(i!=t[11])&&(i!=t[13])&&(i!=t[17])&&(i!=t[18])&&(i!=t[22])&&(i!=t[24])&&(i!=t[27])&&(i!=t[30]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==13)&&(i!=t[6])&&(i!=t[7])&&(i!=t[8])&&(i!=t[9])&&(i!=t[10])&&(i!=t[11])&&(i!=t[12])&&(i!=t[17])&&(i!=t[18])&&(i!=t[23])&&(i!=t[28])&&(i!=t[31]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==14)&&(i!=t[1])&&(i!=t[3])&&(i!=t[4])&&(i!=t[8])&&(i!=t[9])&&(i!=t[10])&&(i!=t[15])&&(i!=t[16])&&(i!=t[17])&&(i!=t[18])&&(i!=t[19])&&(i!=t[20])&&(i!=t[21])&&(i!=t[25])&&(i!=t[26])&&(i!=t[30]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==15)&&(i!=t[2])&&(i!=t[3])&&(i!=t[4])&&(i!=t[5])&&(i!=t[8])&&(i!=t[9])&&(i!=t[10])&&(i!=t[11])&&(i!=t[14])&&(i!=t[16])&&(i!=t[17])&&(i!=t[18])&&(i!=t[19])&&(i!=t[20])&&(i!=t[21])&&(i!=t[22])&&(i!=t[25])&&(i!=t[26])&&(i!=t[27])&&(i!=t[31]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==16)&&(i!=t[4])&&(i!=t[6])&&(i!=t[10])&&(i!=t[11])&&(i!=t[14])&&(i!=t[15])&&(i!=t[17])&&(i!=t[18])&&(i!=t[21])&&(i!=t[22])&&(i!=t[26])&&(i!=t[28]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==17)&&(i!=t[1])&&(i!=t[5])&&(i!=t[6])&&(i!=t[7])&&(i!=t[10])&&(i!=t[11])&&(i!=t[12])&&(i!=t[13])&&(i!=t[14])&&(i!=t[15])&&(i!=t[16])&&(i!=t[18])&&(i!=t[21])&&(i!=t[22])&&(i!=t[23])&&(i!=t[24])&&(i!=t[27])&&(i!=t[28])&&(i!=t[29])&&(i!=t[30]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==18)&&(i!=t[2])&&(i!=t[6])&&(i!=t[7])&&(i!=t[11])&&(i!=t[12])&&(i!=t[13])&&(i!=t[14])&&(i!=t[15])&&(i!=t[16])&&(i!=t[17])&&(i!=t[22])&&(i!=t[23])&&(i!=t[24])&&(i!=t[28])&&(i!=t[29])&&(i!=t[31]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==19)&&(i!=t[1])&&(i!=t[4])&&(i!=t[9])&&(i!=t[14])&&(i!=t[15])&&(i!=t[20])&&(i!=t[21])&&(i!=t[22])&&(i!=t[23])&&(i!=t[24])&&(i!=t[25])&&(i!=t[26]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==20)&&(i!=t[2])&&(i!=t[5])&&(i!=t[8])&&(i!=t[10])&&(i!=t[14])&&(i!=t[15])&&(i!=t[19])&&(i!=t[21])&&(i!=t[22])&&(i!=t[23])&&(i!=t[24])&&(i!=t[25])&&(i!=t[26])&&(i!=t[30]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==21)&&(i!=t[3])&&(i!=t[6])&&(i!=t[9])&&(i!=t[10])&&(i!=t[11])&&(i!=t[14])&&(i!=t[15])&&(i!=t[16])&&(i!=t[17])&&(i!=t[19])&&(i!=t[20])&&(i!=t[22])&&(i!=t[23])&&(i!=t[24])&&(i!=t[25])&&(i!=t[26])&&(i!=t[27])&&(i!=t[28])&&(i!=t[30])&&(i!=t[31]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==22)&&(i!=t[4])&&(i!=t[7])&&(i!=t[10])&&(i!=t[11])&&(i!=t[12])&&(i!=t[15])&&(i!=t[16])&&(i!=t[17])&&(i!=t[18])&&(i!=t[19])&&(i!=t[20])&&(i!=t[21])&&(i!=t[23])&&(i!=t[24])&&(i!=t[26])&&(i!=t[27])&&(i!=t[28])&&(i!=t[29])&&(i!=t[30])&&(i!=t[31]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==23)&&(i!=t[1])&&(i!=t[5])&&(i!=t[11])&&(i!=t[13])&&(i!=t[17])&&(i!=t[18])&&(i!=t[19])&&(i!=t[20])&&(i!=t[21])&&(i!=t[22])&&(i!=t[24])&&(i!=t[28])&&(i!=t[29])&&(i!=t[31]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==24)&&(i!=t[2])&&(i!=t[6])&&(i!=t[12])&&(i!=t[17])&&(i!=t[18])&&(i!=t[19])&&(i!=t[20])&&(i!=t[21])&&(i!=t[22])&&(i!=t[23])&&(i!=t[28])&&(i!=t[29]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==25)&&(i!=t[2])&&(i!=t[5])&&(i!=t[10])&&(i!=t[14])&&(i!=t[15])&&(i!=t[19])&&(i!=t[20])&&(i!=t[21])&&(i!=t[26])&&(i!=t[27])&&(i!=t[28])&&(i!=t[29]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==26)&&(i!=t[6])&&(i!=t[8])&&(i!=t[11])&&(i!=t[14])&&(i!=t[15])&&(i!=t[16])&&(i!=t[19])&&(i!=t[20])&&(i!=t[21])&&(i!=t[22])&&(i!=t[25])&&(i!=t[27])&&(i!=t[28])&&(i!=t[29])&&(i!=t[30])&&(i!=t[31]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==27)&&(i!=t[3])&&(i!=t[7])&&(i!=t[9])&&(i!=t[12])&&(i!=t[15])&&(i!=t[17])&&(i!=t[21])&&(i!=t[22])&&(i!=t[25])&&(i!=t[26])&&(i!=t[28])&&(i!=t[29])&&(i!=t[30])&&(i!=t[31]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==28)&&(i!=t[4])&&(i!=t[10])&&(i!=t[13])&&(i!=t[16])&&(i!=t[17])&&(i!=t[18])&&(i!=t[21])&&(i!=t[22])&&(i!=t[23])&&(i!=t[24])&&(i!=t[25])&&(i!=t[26])&&(i!=t[27])&&(i!=t[29])&&(i!=t[30])&&(i!=t[31]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==29)&&(i!=t[1])&&(i!=t[5])&&(i!=t[11])&&(i!=t[17])&&(i!=t[18])&&(i!=t[22])&&(i!=t[23])&&(i!=t[24])&&(i!=t[25])&&(i!=t[26])&&(i!=t[27])&&(i!=t[28]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==30)&&(i!=t[7])&&(i!=t[8])&&(i!=t[12])&&(i!=t[14])&&(i!=t[17])&&(i!=t[20])&&(i!=t[21])&&(i!=t[22])&&(i!=t[26])&&(i!=t[27])&&(i!=t[28])&&(i!=t[31]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
			if ((u==31)&&(i!=t[3])&&(i!=t[9])&&(i!=t[13])&&(i!=t[15])&&(i!=t[18])&&(i!=t[21])&&(i!=t[22])&&(i!=t[23])&&(i!=t[26])&&(i!=t[27])&&(i!=t[28])&&(i!=t[30]))
			{
				t[u]=i;
				wrk(u+1);
				t[u]=0;
				if (s==b) return;
			}
		}
	}
}
int main(){
	freopen("hexodoku.in","r",stdin);
	freopen("hexodoku.out","w",stdout);
	//ios::sync_with_stdio(false);
	read(a);read(b);
	for (int i=1;i<=31;i++) read(t[i]);
	s=0;
	wrk(1);
	if (s<b) cout<<"No way"<<endl;
	return 0;
}


