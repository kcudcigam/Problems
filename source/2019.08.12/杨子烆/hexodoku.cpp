#include<bits/stdc++.h>
using namespace std;
unsigned int vis[32];int k,n,j;
int ans[32];
int sum=0,flg,fl;
void shuchu(){
	cout<<"Found\n";
	for(int i=1;i<=31;i++){
		cout<<ans[i]<<' ';
	}
	fl=1;
}
int h[32][32]={{0},{2,4,5,6,9,10,11,17,23,29,14,19},{1,4,5,10,11,15,20,25,6,12,18,24},{4,8,9,10,14,15,5,6,7,21,27,31},{3,5,6,7,1,2,8,9,10,11,14,15,19,16,22,28},{3,4,6,7,1,2,10,11,15,17,20,23,25,29},{1,2,3,4,5,7,10,11,12,13,17,18,24,16,21,26},{12,17,22,27,30,6,5,4,3,11,17,18,13},{9,10,11,12,13,3,4,14,15,20,26,30},{8,10,11,12,13,3,4,14,15,21,27,31,1,19},{8,9,11,12,13,3,4,14,15,1,2,5,6,17,21,22,20,25,28},{8,9,10,12,13,1,2,3,4,5,6,7,17,18,15,21,22,23,26,29},{8,9,10,11,13,6,7,17,18,22,27,30,2,24},{8,9,10,11,12,6,7,17,18,23,28,31},{15,16,17,18,3,4,8,9,10,19,20,21,25,26,1,30},{14,16,17,18,3,4,8,9,10,19,20,21,25,26,11,22,27,31,5,2},{14,15,17,18,10,11,21,22,4,6,26,28},{14,15,16,18,10,11,12,13,6,7,22,23,24,28,29,21,27,30,1,5},{14,15,16,17,22,23,24,28,29,11,12,13,6,7,2,31},{14,15,25,26,1,4,9,20,21,22,23,24},{19,21,22,23,24,15,14,25,26,10,5,2,8,30},{19,20,22,23,14,14,15,16,17,25,26,27,28,10,11,30,31,6,9,3},{19,20,21,23,24,15,16,17,18,26,27,28,29,10,11,30,31,12,7,4},{19,20,21,22,24,17,18,28,29,1,5,11,13,31},{19,20,21,22,23,17,18,28,29},{26,27,28,29,19,20,21,14,15,10,5,2},{25,27,28,29,21,22,30,31,19,20,14,15,8,16,11,6},{25,26,28,29,21,22,30,31,3,9,15,7,12,7},{4,10,16,22,25,26,27,29,21,30,31,17,18,23,24},{25,26,27,28,11,1,5,17,18,22,23,24},{31,27,28,21,22,20,8,14,17,12,7,26},{30,21,22,26,27,28,23,18,13,15,9,3}};
void dfs(int x){
	bool vist[32];
	if(fl==1)return;
	if(x==31){
		if(ans[x]!=0){
			sum+=1;
			if(sum==n){
				shuchu();
			}
		}
		else{
			for(int i=1;i<=k;i++){
				if(fl==1)return;
				if((vis[x]>>(i-1))%2==0){
					for(int i=1;i<=k;i++){
						if((vis[x]>>(i-1))%2==0){
							ans[x]=i;
							sum++;
								if(sum==n)shuchu();
							
	}
				}
			}
		}
	}
}
	else{
	
	if(ans[x]!=0){
		dfs(x+1);
	}
	else{
		for(int i=1;i<=k;i++){
			if((vis[x]>>(i-1))%2==0){
				ans[x]=i;
				j=0;
				while(h[x][j]){
					if((vis[h[x][j]]>>(ans[x]-1))%2==1){
						j++;vist[h[x][j]]=true;continue;
					}else{
						vis[h[x][j]]+=(1<<(i-1));
					}
					j++;
				}
				j=0;
				dfs(x+1);
				
				while(h[x][j]){
					if(!vist[h[x][j]]){
						j++;continue;
					}else{
						vis[h[x][j]]+=(1<<(i-1));
					}
					j++;
				}
				ans[x]=0;
				j=0;
		}
	}
	
}
}
}
template <typename T> void read(T &x) {
	x = 0; int f = 1;
	char c = getchar();
	for (; !isdigit(c); c = getchar()) if (c == '-') f = -f;
	for (; isdigit(c); c = getchar()) x = x * 10 + c - '0';
	x *= f;
}
template <typename T> void write(T x) {
	if (x < 0) x = -x, putchar('-');
	if (x > 9) write(x / 10);
	putchar(x % 10 + '0');
}
template <typename T> void writeln(T x) {
	write(x);
	puts("");
}
int main(){
	freopen("hexodoku.in","r",stdin);
	freopen("hexodoku","w",stdout);
	priority_queue <int> s;
	read(k);read(n);
	if(k<=7){
		cout<<"No way";return 0;
	}
	int j=0;
/*	for(int i=1;i<=31;i++){
		
		while(h[i][j]){
			s.push(-h[i][j]);
			j++;
		}
		for(int k=0;k<j;k++){
			s.pop();
			cout<<-s.top()<<' ';
		}
		while(s.size())s.pop();
		cout<<endl;
		j=0;
	}
	*/
		int t;
		j=0;
		for(int i=1;i<=31;i++){
			read(ans[i]);
			if(ans[i]!=0){
				t=1<<(ans[i]-1);
				if((vis[h[k][j]]>>(ans[i]-1))%2==1){
					cout<<"No way";return 0;
				}
				while(h[i][j]){
					if((vis[h[i][j]]>>(ans[i]-1))%2==1){
						j++;continue;
					}else{
						vis[h[i][j]]+=t;
					}
					j++;
				}
			}
			j=0;
		}
		dfs(1);
		if(fl==0)cout<<"No way";
		return 0;

}


